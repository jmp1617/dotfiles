function getQueryStringValue(e){return unescape(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+escape(e).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))}var namespace=typeof browser!="undefined"?browser:chrome,sorryString1=namespace.i18n.getMessage("sorryString1"),sorryString2=namespace.i18n.getMessage("sorryString2"),resetString=namespace.i18n.getMessage("resetString"),noLuckString=namespace.i18n.getMessage("noLuckString"),improveString=namespace.i18n.getMessage("improveString"),resetAgainString=namespace.i18n.getMessage("resetAgainString"),feedbackString=namespace.i18n.getMessage("feedbackString"),emailSubject=namespace.i18n.getMessage("emailSubject"),emailBody1=namespace.i18n.getMessage("emailBody1"),emailBody2=namespace.i18n.getMessage("emailBody2"),emailBody3=namespace.i18n.getMessage("emailBody3"),emailBody4=namespace.i18n.getMessage("emailBody4"),newLineEscapeSeq="%0D%0A",emailId="assistantfeedback@amazon.com",extensionLogId="";try{namespace&&namespace.storage&&namespace.storage.local&&namespace.storage.local.get("ubpv2.extension.extensionLogId",function(e){if(namespace&&namespace.runtime&&namespace.runtime.lastError)throw new Error("Storage error while getting log Id : ["+namespace.runtime.lastError);extensionLogId=e["ubpv2.extension.extensionLogId"],document.getElementById("logId")&&(document.getElementById("logId").textContent=extensionLogId)})}catch(error){console.error("Failed to get value from extension storage ["+error.toString()+"]")}var errorCode=getQueryStringValue("errorCode");errorCode&&document.getElementById("errorCode")&&(document.getElementById("errorCode").textContent="Error code: "+errorCode),window.addEventListener("DOMContentLoaded",function(){document.getElementById("sorryTextLine1")&&sorryString1&&document.getElementById("sorryTextLine2")&&sorryString2&&(document.getElementById("sorryTextLine1").textContent=sorryString1,document.getElementById("sorryTextLine2").textContent=sorryString2),document.getElementById("noLuckText")&&noLuckString&&(document.getElementById("noLuckText").textContent=noLuckString),document.getElementById("improveText")&&improveString&&(document.getElementById("improveText").textContent=improveString),document.getElementById("retryButton")&&(resetString&&(document.getElementById("retryButton").textContent=resetString),document.getElementById("retryButton").addEventListener("click",function(){namespace&&namespace.runtime&&(namespace.runtime.reload!=undefined?namespace.runtime.reload():window.location.reload())})),document.getElementById("retryAgainButton")&&(resetAgainString&&(document.getElementById("retryAgainButton").textContent=resetAgainString),document.getElementById("retryAgainButton").addEventListener("click",function(){namespace&&namespace.runtime&&(namespace.runtime.reload!=undefined?namespace.runtime.reload():window.location.reload())})),document.getElementById("feedbackButton")&&(feedbackString&&(document.getElementById("feedbackButton").textContent=feedbackString),document.getElementById("feedbackButton").addEventListener("click",function(){var e=emailBody1+newLineEscapeSeq+emailBody2+newLineEscapeSeq+newLineEscapeSeq+emailBody3+newLineEscapeSeq+newLineEscapeSeq+emailBody4+extensionLogId+(document.getElementById("errorCode")?newLineEscapeSeq+document.getElementById("errorCode").textContent:""),t="mailto:"+emailId+"?subject="+emailSubject+"&body="+e;namespace&&namespace.tabs&&namespace.tabs.create({url:t})}))});